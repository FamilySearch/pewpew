<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Command-line options</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="src/custom.css">
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="design.html">Pewpew design overview</a></li><li class="chapter-item expanded "><a href="config.html">Config file</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="config/config-section.html">config section</a></li><li class="chapter-item expanded "><a href="config/load_pattern-section.html">load_pattern section</a></li><li class="chapter-item expanded "><a href="config/vars-section.html">vars section</a></li><li class="chapter-item expanded "><a href="config/providers-section.html">providers section</a></li><li class="chapter-item expanded "><a href="config/loggers-section.html">loggers section</a></li><li class="chapter-item expanded "><a href="config/endpoints-section.html">endpoints section</a></li><li class="chapter-item expanded "><a href="config/common-types.html">Common types</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="config/common-types/expressions.html">Expressions</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="cli.html" class="active">Command-line options</a></li><li class="chapter-item expanded "><a href="viewing-results.html">Viewing results</a></li><li class="chapter-item expanded "><a href="tuning.html">Tuning a machine</a></li><li class="chapter-item expanded "><a href="bug-report.html">Found a bug?</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="command-line-options"><a class="header" href="#command-line-options">Command-line options</a></h1>
<p>There are two ways that Pewpew can execute: either a full load test or a try run. For reference here's the output of <code>pewpew --help</code>:
<br/><br/></p>
<pre><code>The HTTP load test tool https://familysearch.github.io/pewpew

Usage: pewpew &lt;COMMANND&gt;

Commands:
  run    Runs a full load test
  try    Runs the specified endpoint(s) a single time for testing purposes
  help   Print this message or the help of the given subcommand(s)

Options:
  -h, --help       Prints help information
  -V, --version    Prints version information
</code></pre>
<p>As signified in the above help output, there are two subcommands <code>run</code> and <code>try</code>.
<br/><br/>
Here's the output of <code>pewpew run --help</code>:
<br/><br/></p>
<pre><code>Usage: pewpew run [OPTIONS] &lt;CONFIG&gt;

Arguments:
  &lt;CONFIG&gt;  Load test config file to use

Options:
  -f, --output-format &lt;FORMAT&gt;         Formatting for stats printed to stdout [default: human]
                                       [possible values: human, json]
  -d, --results-directory &lt;DIRECTORY&gt;  Directory to store results and logs
  -t, --start-at &lt;START_AT&gt;            Specify the time the test should start at
  -o, --stats-file &lt;STATS_FILE&gt;        Specify the filename for the stats file
  -s, --stats-file-format &lt;FORMAT&gt;     Format for the stats file [default: json]  [possible values:
                                       json]
  -w, --watch                          Watch the config file for changes and update the test
                                       accordingly
  -h, --help                           Prints help information
</code></pre>
<p>The <code>-f</code>, <code>--output-format</code> parameter allows changing the formatting of the stats which are printed to stdout.</p>
<p>The <code>-d</code>, <code>--results-directory</code> parameter will store the results file and any output logs in the specified directory. If the directory does not exist it is created.</p>
<p>The <code>-w</code>, <code>--watch</code> parameter makes pewpew watch the config file for changes. The <code>watch_transition_time</code> <a href="./config/config-section.html#general">general config option</a> allows specifying a transition time for switching to the new <code>load_pattern</code>s and <code>peak_load</code>s.</p>
<p>While any part of a test can be updated, special care should be made when modifying or removing endpoints. This is because the aggregation of statistics happens based upon the numerical index of where it appears in the config file. If, for example, the first endpoint is no longer needed and it is simply removed from the test, that means what was the second endpoint is now the first and all of the statistics for that endpoint will begin aggregating in with the first endpoint's statistics. An alternative approach to removing the endpoint would be to set the <code>peak_load</code> on the first endpoint to <code>0hpm</code>.
<br/><br/>
Here's the output of <code>pewpew try --help</code>:
<br/><br/></p>
<pre><code>Usage: pewpew try [OPTIONS] &lt;CONFIG&gt;

Arguments:
  &lt;CONFIG&gt;  Load test config file to use

Options:
  -o, --file &lt;FILE&gt;                    Send results to the specified file instead of stdout
  -f, --format &lt;FORMAT&gt;                Specify the format for the try run output [default: human]
                                       [possible values: human, json]
  -i, --include &lt;INCLUDE&gt;              Filter which endpoints are included in the try run. Filters
                                       work based on an endpoint's tags. Filters are specified in
                                       the format &quot;key=value&quot; where &quot;*&quot; is a wildcard. Any
                                       endpoint matching the filter is included in the test
  -l, --loggers                        Enable loggers defined in the config file
  -d, --results-directory &lt;DIRECTORY&gt;  Directory to store logs (if enabled with --loggers)
  -k, --skip-response-body             Skips reponse body from output (try command)
  -K, --skip-request-body              Skips request body from output (try command)
  -h, --help                           Prints help information
</code></pre>
<p>A try run will run one or more endpoints a single time and print out the raw HTTP requests and responses to stdout. By default all endpoints are included in the try run. This is useful for testing out a <a href="./config.html">config file</a> before running a full load test. When the <code>--include</code> parameter is used, pewpew will automatically include any other endpoints needed to provide data for the explicitly included endpoints.</p>
<p>The <code>-i</code>, <code>--include</code> parameter allows the filtering of which endpoints are included in the try run. Filtering works based on an endpoint's <code>tags</code> (see the <code>tags</code> parameter in the <a href="./config/endpoints-section.html">endpoints</a> section). The <code>INCLUDE</code> pattern is specified in the format <code>key=value</code> or <code>key!=value</code> and an asterisk <code>*</code> can be used as a wildcard. This parameter can be used multiple times to specify multiple patterns. An endpoint which matches any of the patterns is included in the try run.</p>
<p>The <code>-l</code>, <code>--loggers</code> flag specifies that any loggers defined in the config file should be enabled. By default, during a try run, loggers are disabled.</p>
<p>The <code>-d</code>, <code>--results-directory</code> parameter will store any log files (if the <code>--loggers</code> flag is used) in the specified directory. If the directory does not exist it is created.</p>
<p>The <code>-k</code>, <code>--skip-response-body</code> parameter ensures that during a Try run, the response bodies aren't displayed. This can be particularly useful for debugging responses when the body is very long and not crucial for the debugging process.</p>
<p>The <code>-K</code>, <code>--skip-request-body</code> parameter ensures that during a Try run, the request bodies aren't displayed. This can be particularly useful for debugging requests when the body is very long and not crucial for the debugging process.
<br/><br/></p>
<p>In both the <code>run</code> and <code>try</code> subcommands a <a href="./config.html">config file</a> is required.</p>
<h2 id="environment-variables"><a class="header" href="#environment-variables">environment variables</a></h2>
<p>While most environment variables are passed on to the <a href="./config/vars-section.html">vars</a> section of the <a href="./config.html">config</a> file, there are a few that affect the pewpew executable.</p>
<ul>
<li><strong><code>RUST_BACKTRACE</code></strong> <sub><sup><em>Optional</em></sup></sub> - Enable display of the stack backtrace on errors. Providing any parameter (other than falsey/0) will enable this. Examples. <code>RUST_BACKTRACE=1</code> or <code>RUST_BACKTRACE=full</code>.</li>
<li><strong><code>RUST_LOG</code></strong> <sub><sup><em>Optional</em></sup></sub> - A <a href="https://github.com/rust-lang/log/blob/master/src/lib.rs#L575">LevelFilter</a> specifying what level for pewpew to log at. Allowed values are <code>Off</code>, <code>Error</code>, <code>Warn</code>, <code>Info</code>, <code>Debug</code>, and <code>Trace</code>. Default is <code>Error</code>. See <a href="https://docs.rs/env_logger/0.9.0/env_logger/#enabling-logging">Enable Logging</a> for more complex options for <code>RUST_LOG</code>.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="config/common-types/expressions.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="viewing-results.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="config/common-types/expressions.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="viewing-results.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
