# Run this file with the test-server, then specify the PORT as a parameter to this try or run script.

vars:
  port: "${e:PORT}"
  scale_percentage: '${e:SCALE_PERCENTAGE}' # Can be 200, 300, 1000, 50

load_pattern:
  - !linear
      from: 10%
      to: ${v:scale_percentage}%
      over: 5s
  - !linear
      from: ${v:scale_percentage}%
      to: ${v:scale_percentage}%
      over: 10s

loggers:
  test:
    to: !stderr

endpoints:
  - method: GET
    url: http://localhost:${v:port}
    peak_load: 1hps
    logs:
      test:
        select: response.status
